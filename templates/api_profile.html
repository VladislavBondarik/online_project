{% extends 'base.html' %}
{% block title %}Профиль - ITCAREER{% endblock %}
{% block content %}
<div class="container mt-5">
    <h1 class="text-center">Профиль</h1>
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
    <form method="post">
        {% csrf_token %}
        <div class="form-group">
            <label>Имя пользователя:</label>
            <input type="text" name="username" value="{{ user.username }}" class="form-control">
        </div>
        <div class="form-group">
            <label>Email:</label>
            <input type="email" name="email" value="{{ user.email }}" class="form-control">
        </div>
        <button type="submit" name="update_profile" class="btn btn-primary mt-3">Обновить профиль</button>
    </form>
    <h3 class="mt-4">Смена пароля</h3>
    <form method="post">
        {% csrf_token %}
        {{ password_form.as_p }}
        <button type="submit" name="change_password" class="btn btn-primary mt-3">Сменить пароль</button>
    </form>
    <h3 class="mt-4">Записанные курсы</h3>
    <ul class="list-group">
        {% for enrollment in enrollments %}
            <li class="list-group-item">{{ enrollment.course.title }} - {{ enrollment.status }}</li>
        {% empty %}
            <li class="list-group-item">Вы не записаны на курсы.</li>
        {% endfor %}
    </ul>
    <h3 class="mt-4">Прогресс</h3>
    <ul class="list-group">
        {% for prog in progress %}
            <li class="list-group-item">{{ prog.course.title }} - {{ prog.module.title }}: {{ prog.progress }}%</li>
        {% empty %}
            <li class="list-group-item">Прогресс отсутствует.</li>
        {% endfor %}
    </ul>
    <form method="post" onsubmit="return confirm('Вы уверены, что хотите удалить аккаунт?');">
        {% csrf_token %}
        <button type="submit" name="delete_account" class="btn btn-danger mt-3">Удалить аккаунт</button>
    </form>
</div>
{% endblock %}